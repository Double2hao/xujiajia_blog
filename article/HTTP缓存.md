#HTTP缓存
>  
 原文地址：https://www.jianshu.com/p/b32d13655be7 


# 客户端缓存场景

1、如果HTTP支持缓存，那么在缓存没有过期的情况下，会使用本地缓存。 2、如果HTTP支持缓存，并且缓存已经过期，那么客户端不用使用本地缓存，会向服务器请求。

# HTTP header

客户端是否对HTTP协议缓存，一般是根据HTTP协议的header来控制的。通用的主要有以下几个header。（并不是都会被使用到，具体要看服务器和客户端如何协商的）

>  
 HTTP本身只是一个协议，是需要服务器与客户端一起协商的。 理论上来说，如果服务端与客户端协商期望在body中定义是否缓存的字段也是可行的，只是这样不符合规范。 只有大家都遵守规范，才可以相互之间调用。 


### Cache-Control

一般可以有以下信息：
1. 客户端是否需要缓存1. 客户端缓存保留的时间
### Last-Modified 和 If-Modified-Since

服务器在给客户端返回信息的时候，用Last-Modified 告诉客户端，服务器上次更新的时间。

在客户端下次和服务器请求的时候，在If-Modified-Since中填上服务器上次更新的时间。这样服务器可以根据客户端返回的字段来和自己的比较，来判断客户端的数据是否过期。

### ETag

服务响应请求时，告诉客户端当前资源在服务器的唯一标识(生成规则由服务器决定)

比如客户端在断点续传的时候，发现下载文件的ETag变了，那就表明服务端的文件更新了，理论上来说就需要重新下载。
